<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lung Disease Detection</title>
    <style>
        /* From Uiverse.io by satyamchaudharydev */
        /* === removing default button style ===*/
        .button {
            margin: 0;
            height: auto;
            background: transparent;
            padding: 0;
            border: none;
            cursor: pointer;
            position: relative;
            text-transform: uppercase;
            color: transparent;
            font-size: 2em;
            letter-spacing: 3px;
            text-decoration: none;
            font-family: "Arial";
            -webkit-text-stroke: 1px rgba(255,255,255,0.6);
        }

        /* Hover text styling for buttons */
        .hover-text {
            position: absolute;
            box-sizing: border-box;
            content: attr(data-text);
            color: #37FF8B;
            width: 0%;
            inset: 0;
            border-right: 6px solid #37FF8B;
            overflow: hidden;
            transition: 0.5s;
            -webkit-text-stroke: 1px #37FF8B;
        }

        /* Hover effect for buttons */
        .button:hover .hover-text {
            width: 100%;
            filter: drop-shadow(0 0 23px #37FF8B);
        }

        /* === General Styles === */
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            padding-top: 50px;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        h1 {
            font-size: 40px;
        }
        input {
            font-size: 18px;
            padding: 10px;
            margin: 10px;
        }
        .container {
            margin-top: 20px;
        }
        .hidden {
            display: none;
        }
        /* Loader Style */
        .loader {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .bar {
            display: inline-block;
            width: 3px;
            height: 20px;
            background-color: rgba(0, 169, 127, .5);
            border-radius: 10px;
            animation: scale-up4 1s linear infinite;
        }
        .bar:nth-child(2) {
            height: 35px;
            margin: 0 5px;
            animation-delay: .25s;
        }
        .bar:nth-child(3) {
            animation-delay: .5s;
        }
        @keyframes scale-up4 {
            20% {
                background-color: #00A97F;
                transform: scaleY(1.5);
            }
            40% {
                transform: scaleY(1);
            }
        }
        /* === Choose File Button Style === */
        .choose-button {
            --color: #00A97F;
            padding: 0.8em 1.7em;
            background-color: transparent;
            border-radius: .3em;
            position: relative;
            cursor: pointer;
            transition: .5s;
            font-weight: 400;
            font-size: 17px;
            border: 1px solid;
            text-transform: uppercase;
            color: var(--color);
        }
        .choose-button:hover {
            color: rgb(10, 25, 30);
        }
        .file-upload {
            position: relative;
            display: inline-block;
        }
        .file-upload input[type="file"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        #fileName {
            margin-top: 10px;
            font-size: 18px;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("loader").style.display = "flex";
            setTimeout(function() {
                document.getElementById("loader").style.display = "none";
                document.getElementById("nameAgeSection").classList.remove("hidden");
            }, 2000);
        });
        
        function showUploadSection() {
            document.getElementById('nameAgeSection').classList.add('hidden');
            document.getElementById('uploadSection').classList.remove('hidden');
            document.getElementById('displayName').innerText = document.getElementById('name').value;
            document.getElementById('displayAge').innerText = document.getElementById('age').value;
        }
        
        function displayFileName() {
            var fileInput = document.getElementById('file');
            var fileNameDisplay = document.getElementById('fileName');
            if (fileInput.files.length > 0) {
                fileNameDisplay.innerText = "Selected File: " + fileInput.files[0].name;
                fileNameDisplay.style.opacity = 1;
            }
        }
        
        function showLoaderBeforeSubmit(event) {
            event.preventDefault();
            document.getElementById('uploadSection').classList.add('hidden');
            document.getElementById('loader').style.display = 'flex';
            setTimeout(function() {
                event.target.submit();
            }, 5000);
        }
    </script>
</head>
<body>
    <div id="loader" class="loader">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </div>
    
    <h1>Lung Disease Detection</h1>
    
    <div class="container hidden" id="nameAgeSection">
        <form onsubmit="event.preventDefault(); showUploadSection();">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required><br><br>
            <label for="age">Age:</label>
            <input type="number" id="age" name="age" required><br><br>
            <button class="button" type="submit">
                NEXT
                <span class="hover-text" data-text="NEXT"></span>
            </button>
        </form>
    </div>
    
    <div class="container hidden" id="uploadSection">
        <p><strong>Name:</strong> <span id="displayName"></span></p>
        <p><strong>Age:</strong> <span id="displayAge"></span></p>
        <form action="/predict" method="POST" enctype="multipart/form-data" onsubmit="showLoaderBeforeSubmit(event)">
            <div class="file-upload">
                <label class="choose-button button">
                    CHOOSE FILE
                    <input type="file" id="file" name="file" accept="audio/*" required onchange="displayFileName()">
                    <span class="hover-text" data-text="CHOOSE FILE"></span>
                </label>
            </div>
            <p id="fileName"></p>
            <br><br>
            <button class="button" type="submit">
                ANALYZE
                <span class="hover-text" data-text="ANALYZE"></span>
            </button>
        </form>
    </div>
</body>
</html>